<% content_for :footer do %>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&callback=loadMaps"></script>
<% end %>

<script type="text/javascript">
  var latitude = <%= @art.latitude || 0 %>;
  var longitude = <%= @art.longitude || 0 %>;

  // street view, point of view
  var heading = <%= @art.header || 0 %>;
  var pitch = <%= @art.pitch || 0 %>;
  var zoom = <%= @art.zoom || 0 %>;

  function loadMaps() {
    var location = new google.maps.LatLng(latitude, longitude);

    // regular map
    var map = new google.maps.Map(document.getElementById("map_canvas"), {
      zoom: 15,
      center: location,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      mapTypeControl: false
    });
    
    var marker = new google.maps.Marker({
      position: location
    });
    marker.setMap(map);
    
    // street view map
    var street = new google.maps.StreetViewPanorama(document.getElementById("pano"), {
      position: location,
      pov: {
        heading: heading,
        pitch: pitch,
        zoom: zoom
      },
      addressControl: false,
      navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
      }
    });
  }

  $(function() {

    $("#editInformation a").click(
      function() {
        $("#artworkMetaData").hide();
        $("#edit_artworkMetaData").show();
        $(".callout").hide();
        return false;
      }
    );
    
    $(".cancelBtn").click(
      function() {
        $("#artworkMetaData").show();
        $("#edit_artworkMetaData").hide();
        $(".callout").show();
        return false;
      }
    );

  });
</script>

<div id="fullColumn">
  <div id="titleContent">
    <h2 class="withSubtext withIcon">
      <%= @art.title %>
    </h2>
    
    <% if @art.commissioned %>
      <span id="commissioned" title="Commissioned by the city">Commissioned by the city</span>
    <% end %>
    
    <div class="clear"></div>
    
    <!-- <span class="commentTitle">2 comments</span> -->
  </div>
</div>

<div id="ltColumn">
  <div class="module">
    <div id="editInformation">
      <span class="callout">
        Know more information about this piece?
        <a href="#">Edit it now!</a>
      </span>
    </div>
    
    <dl id="artworkMetaData">
      <dt>Category</dt> 
      <dd><%= @art.category %></dd>

      <dt>Artist(s)</dt>  
      <dd><%= @art.artist %></dd>

      <dt>Year</dt> 
      <dd><%= @art.year %></dd>

      <dt>Neighborhood</dt> 
      <dd><%= @art.neighborhood %></dd>

      <dt>Description</dt>  
      <dd><%= @art.description %></dd>
    </dl>
    
    <form id="edit_artworkMetaData" action="." method="get">
      <ul>
        <li>
          <label>Location Description</label>
          <textarea id="id_locDescription" name="text"></textarea>
        </li>
        <li>
          <button class="submitBtn" type="submit">
              <span>Submit</span>
          </button>
        </li>
        <li>
          <a class="cancelBtn buttonLink " href="#">Cancel</a>
        </li> 
      </ul>
    </form>
    <div class="clear"></div>
    
  </div>
  
  <div class="module" id="comments">
    <h3>Comments</h3>
    <ol>
      <li>
        <span class="commentNumber">1</span>
        <div class="commentMetaData">
          <span class="commentName"><a href="#">Ali</a></span>
          <span class="entryDate">August 27, 2010</span>
          <p>This is a really interesting piece. Definitely going to walk down and see it this weekend!</p>
        </div>
        <div class="clear"></div>
      </li>
      <li>
        <span class="commentNumber">2</span>
        <div class="commentMetaData">
          <span class="commentName"><a href="#">Chris</a></span>
          <span class="entryDate">August 30, 2010</span>
          <p>Thanks for posting this, it is one of my favorite pieces in the city.</p>
        </div>
        <div class="clear"></div>
      </li>
    </ol> 
  </div>
  
  <div class="module">
    <h3>Leave a Comment</h3>
    <form id="commentForm" action="." method="get">
      <ul>
        <li>
          <label>Name</label>
          <input id="id_name" type="text" name="name"/>
        </li>
        <li>
          <label>Email</label>
          <input id="id_email" type="text" name="email"/>
        </li>
        <li>
          <label>URL</label>
          <input id="id_url" type="text" name="url"/>
        </li>
        <li>
          <label>Comment</label>
          <textarea id="id_comment" name="text"></textarea>
        </li>
        <li>
          <button class="submitBtn" type="submit">
            <span>Submit</span>
          </button>
        </li>   
      </ul> 
    </form>
  </div>
</div>

<div id="rtColumn">
  <div class="module" id="artworkPhoto">
    <%= image_tag 'placeholder_big.jpg' %>
  </div>
  
  <div class="module">
    <h3>Have Another Photo? Upload it now!</h3>
    <input type="file" />
  </div>
  
  <div id="map_canvas" class="smMap module"></div>
  <div name="pano" id="pano" class="module"></div>
</div>