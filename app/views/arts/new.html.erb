<% content_for :footer do %>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&callback=loadMaps"></script>
<% end %>

<% content_for :head do %>
  <script type="text/javascript">
    $(function() {
      if ($("input#art_latitude").val() == "")
        $("input#art_latitude").val("Click on Map");
      if ($("input#art_longitude").val() == "")
        $("input#art_longitude").val("Click on Map");
    });
    
    function loadMaps() {
      
      // dupont circle
      var start = new google.maps.LatLng(38.90940, -77.04382);
      
      var map = new google.maps.Map(document.getElementById("map_canvas"), {
        zoom: 15,
        center: start,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
      });
      
      google.maps.event.addListener(map, "click", function(event) {
        $("input#art_latitude").val(event.latLng.lat());
        $("input#art_longitude").val(event.latLng.lng());
      });
      
    }
  </script>
<% end %>

<div id="fullColumn">
  <div id="titleContent">
    <h2 class="withSubtext">Add a New Point</h2>
  </div>
</div>

<div id="ltColumn">
  <% if @art.errors[:location].present? %>
    <div class="errors">
      Please click on the map to choose a latitude or longitude, or enter an address.
    </div>
  <% end %>

  <% form_for @art do |f| %>
    <ul>
      <li>
        <%= f.label :category %>
        <select id="id_categories" name="art[category]">
          <option value="">---</option>
          <% categories.each do |category| %>
            <option><%= category %></option>
          <% end %>
        </select>
      </li>
      <li>
        <%= f.label :title %>
        <%= f.text_field :title %>
      </li>
      <li>
        <%= f.label :artist, "Artist(s)" %>
        <%= f.text_field :artist %>
      </li>
      <li>
        <%= f.label :year %>
        <%= f.text_field :year %>
      </li>
      <li>
        <%= f.label :neighborhood %>
        <select id="id_neighborhood" name="art[neighborhood]">
          <option value="">---</option>
          <% neighborhoods.each do |neighborhood| %>
            <option><%= neighborhood %></option>
          <% end %>
        </select>
      </li>
      <li>
        <%= f.label :description %>
        <%= f.text_area :description %>
      </li>
      <li class="formModule">
        <%= f.label :latitude %>
        <%= f.text_field :latitude %>
      </li>
      <li>
        <%= f.label :longitude %>
        <%= f.text_field :longitude %>
      </li>
      <li><span>or</span></li>            
      <li>
        <%= f.label :address %>
        <%= f.text_field :address %>
      </li>
      <li>
        <%= f.label :city %>
        <%= f.text_field :city %>
      </li>
      <li>
        <%= f.label :state %>
        <%= f.text_field :state %>
      </li>
      <li>
        <%= f.label :zip %>
        <%= f.text_field :zip%>
      </li>
      <!--<li class="formModule">
        <label>Photo</label>
        <span class="tip">(jpg, gif only; 2MB limit)</span>
        <input id="file" type="file" name="file" />
      </li>-->
      <li>
        <button class="submitBtn" name="submit" type="submit">
            <span>Submit</span>
        </button>
      </li> 
    </ul>
  <% end %>
</div>

<div id="rtColumn">
  <div id="map_canvas"></div>
</div>